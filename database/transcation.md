## 트랜잭션
- 트랜잭션은 데이터베이스에서 하나의 논리적 기능을 수행하기 위한 작업의 단위 \
- 하나의 트랜잭션 내의 여러개의 쿼리들을 하나로 묶어준다

트랜잭션은 하나의 논리적인 작업 셋에 몇개의 쿼리가 있든 관계없이 \
작업셋이 100% 적용(COMMIT)되거나 아무것도 적용되지 않음(ROLLBACK)을 보장한다.

## 대표적인 동작
### COMMIT

지금까지 작업한 내용을 DB에 영구적으로 저장\
트랜잭션을 종료한다.

### ROLLBACK

지금까지 작업한 내용을 모두 취소하고 트랜잭션을 이전으로 되돌린다.

### AUTOCOMMIT
각각의 쿼리에 자동으로 트랜잭션을 처리해주는 개념 \ 
쿼리가 성공하면 자동으로 commit 하고 실패하면 rollback 한다. \ 
MySQL에서는 기본적으로 autocommit 이 enabled 되어 있다.

## 종합 예시
### 현재 상황
A라는 사람의 계좌에 200만원 B라는 사람의 계좌에 100만원이 있다.
```java
A 계좌 : 200만원
B 계좌 : 100만원
```

### A -> B 10만원 송금
```sql
UPDATE account SET balance = balance - 100000 WHERE id = "A";
UPDATE account SET balance = balance + 100000 WHERE id = "B";
```
하나의 트랜잭션 내에서 이 두 쿼리가 모두 성공해야만 정상적인 작업이다. \ 
만약 하나의 쿼리가 실패한다면 모든 쿼리가 ROLLBACK 된다.

## 트랜잭션의 ACID 속성
### 1) 원자성 (Atomicity)

- 트랜잭션의 모든 작업 셋이 **모두 수행되었거나 되지 않음**을 보장하는 특징
- All Or Nothing
- COMMIT 되기 전엔 **메모리 버퍼에만 저장해두고 실패하면 반영하지 않는 방식**

### 2) 일관성 (Consistency)

- 트랜잭션이 마무리 된 후에도 데이터의 일관성을 보장해야 한다.
- DB에 정의된 Rule을 트랜잭션의 작업 내용이 위반 한다면 적용되지 않아야 한다.

### 3) 격리성 (Isolation)

- 각각의 트랜잭션은 독립적으로 수행되어야 한다.
- 설정에 따라 여러 종류의 isolation level을 제공한다.

### 4) 지속성 (Durability)

- 커밋된 트랜잭션은 영구적으로 데이터베이스에 결과가 저장되어야한다.
